(()=>{var e={21:(e,r,t)=>{"use strict";t.r(r),t.d(r,{NIL:()=>E,parse:()=>y,stringify:()=>d,v1:()=>g,v3:()=>v,v4:()=>b,v5:()=>I,validate:()=>f,version:()=>S});const n=require("crypto");var o=t.n(n);const i=new Uint8Array(256);let s=i.length;function a(){return s>i.length-16&&(o().randomFillSync(i),s=0),i.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,f=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,r=0){const t=(u[e[r+0]]+u[e[r+1]]+u[e[r+2]]+u[e[r+3]]+"-"+u[e[r+4]]+u[e[r+5]]+"-"+u[e[r+6]]+u[e[r+7]]+"-"+u[e[r+8]]+u[e[r+9]]+"-"+u[e[r+10]]+u[e[r+11]]+u[e[r+12]]+u[e[r+13]]+u[e[r+14]]+u[e[r+15]]).toLowerCase();if(!f(t))throw TypeError("Stringified UUID is invalid");return t};let l,p,h=0,w=0;const g=function(e,r,t){let n=r&&t||0;const o=r||new Array(16);let i=(e=e||{}).node||l,s=void 0!==e.clockseq?e.clockseq:p;if(null==i||null==s){const r=e.random||(e.rng||a)();null==i&&(i=l=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==s&&(s=p=16383&(r[6]<<8|r[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:w+1;const u=c-h+(f-w)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),(u<0||c>h)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,w=f,p=s,c+=122192928e5;const g=(1e4*(268435455&c)+f)%4294967296;o[n++]=g>>>24&255,o[n++]=g>>>16&255,o[n++]=g>>>8&255,o[n++]=255&g;const y=c/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=255&y,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return r||d(o)},y=function(e){if(!f(e))throw TypeError("Invalid UUID");let r;const t=new Uint8Array(16);return t[0]=(r=parseInt(e.slice(0,8),16))>>>24,t[1]=r>>>16&255,t[2]=r>>>8&255,t[3]=255&r,t[4]=(r=parseInt(e.slice(9,13),16))>>>8,t[5]=255&r,t[6]=(r=parseInt(e.slice(14,18),16))>>>8,t[7]=255&r,t[8]=(r=parseInt(e.slice(19,23),16))>>>8,t[9]=255&r,t[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=r/4294967296&255,t[12]=r>>>24&255,t[13]=r>>>16&255,t[14]=r>>>8&255,t[15]=255&r,t};function m(e,r,t){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const r=[];for(let t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=t(s),s[6]=15&s[6]|r,s[8]=63&s[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=s[e];return o}return d(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const v=m("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),b=function(e,r,t){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=n[e];return r}return d(n)},I=m("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),E="00000000-0000-0000-0000-000000000000",S=function(e){if(!f(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},685:e=>{"use strict";e.exports=require("http")},310:e=>{"use strict";e.exports=require("url")}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=t(685),r=process.env.PORT||3e3,{v4:n}=(t(310),t(21));let o=[];function i(e){return 5===e.split("-").length&&!1!==/^[0-9a-f]{8}-?[0-9a-f]{4}-?[1-5][0-9a-f]{3}-?[89ab][0-9a-f]{3}-?[0-9a-f]{12}$/i.test(e)}function s(e,r){let t;for(let n of r)if(n.id==e){t=n;break}return"object"==typeof t?[200,t]:[404]}e.createServer(((e,r)=>{if("/person"===e.url||"/person/"===e.url)try{if("GET"===e.method)r.writeHead(200,{"Content-Type":"application/json"}),r.end(JSON.stringify(o));else{if("POST"!==e.method)throw new Error('no such method on "/person" request');{const t=[];e.on("data",(e=>{t.push(Buffer.from(e))})),e.on("end",(()=>{const e=JSON.parse(t.toString());e.name&&e.age&&e.hobbies?(e.id=n(),o.push(e),r.end(JSON.stringify(e))):(r.writeHead(404),r.write("Error: incorrect properties. Person mast have age, name, hobbies"),r.end())}))}}}catch(e){r.writeHead(500);const t=e.text||'Error: While "/person" request smt wrong.';r.write(t),r.end()}else if(3==e.url.split("/").length&&"person"==e.url.split("/")[1]){if("GET"===e.method){const t=e.url.split("/")[2];if(!1===i(t))r.writeHead(400),r.write("Error:your ID is not UUID"),r.end();else{const e=s(t,o);404===e[0]?(r.writeHead(404),r.write("Error:cannot find person whis such ID"),r.end()):(r.writeHead(200),r.end(JSON.stringify(e[1])))}}else if("PUT"===e.method){const t=[],n=e.url.split("/")[2];if(!1===i(n))r.writeHead(400),r.write("Error:your ID is not UUID"),r.end();else{const i=s(n,o);404===i[0]?(r.writeHead(404),r.write("Error:cannot find person whis such ID"),r.end()):(e.on("data",(e=>{t.push(Buffer.from(e))})),e.on("end",(()=>{const e=JSON.parse(t.toString());if(e.name&&e.age&&e.hobbies){e.id=n;const t=o.findIndex((e=>e==i[1]));o.splice(t,1,e),r.writeHead(200),r.end(JSON.stringify(e))}else r.writeHead(404),r.write("Error: incorrect properties. Person mast have age, name, hobbies"),r.end()})))}}else if("DELETE"===e.method){const t=e.url.split("/")[2];if(!1===i(t))r.writeHead(400),r.write("Error:your ID is not UUID"),r.end();else{const e=s(t,o);if(404===e[0])r.writeHead(404),r.write("Error:cannot find person whis such ID"),r.end();else{const t=o.findIndex((r=>r==e[1]));o.splice(t,1),r.writeHead(204),r.end()}}}}else"/"==e.url?(r.writeHead(200),r.write("Server is running"),r.end()):(r.writeHead(404),r.write("Error: request on non-existing resourse"),r.end())})).listen(r,(()=>{console.log("Server is running...")}))})()})();